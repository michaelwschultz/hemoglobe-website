Parse.initialize("oDwdBE6vlYoo0a12OAZ38YEO4V76hMUtBqqqKhQ4","QdSLqJGYY6m2vscpmqA5irmUogzhAb8fDRl3Da6w");var LIMIT=5E3,map,today=new Date,styles=[{stylers:[{hue:"#0f1d40"},{saturation:-40},{lightness:-30}]}];function initializeMap(a){var c={zoom:2,center:new google.maps.LatLng(20,1),disableDefaultUI:!1,disableDoubleClickZoom:!1,draggable:!0,keyboardShortcuts:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.TERRAIN,styles:styles};map=new google.maps.Map(document.getElementById(a),c)}
google.maps.Map.prototype.markers=[];google.maps.Map.prototype.addMarker=function(a){this.markers[this.markers.length]=a};google.maps.Map.prototype.getMarkers=function(){return this.markers};google.maps.Map.prototype.clearMarkers=function(){for(var a=0;a<this.markers.length;a++)this.markers[a].setMap(null);this.markers=[]};
function dropMarkerAtPosition(a,c,b){setTimeout(function(){var a=new google.maps.MarkerImage("http://hemoglobe.com/img/hemoglobe_pin_shadow.png",null,null,new google.maps.Point(8,24)),f=new google.maps.Marker({position:c,map:map,icon:"http://hemoglobe.com/img/hemoglobe_pin.png",shadow:a,draggable:!1,animation:google.maps.Animation.DROP});google.maps.Map.prototype.addMarker(f);b&&setTimeout(function(){f.setAnimation(google.maps.Animation.BOUNCE)},250)},25*a)}
function shouldBouncePinWithDate(a){return 60>=(today.getTime()-a.getTime())/6E4}
function plotUsersOnMapAndBounce(a,c){google.maps.Map.prototype.clearMarkers();var b=new Parse.Query("UserProfile");b.notEqualTo("location",null);b.limit(LIMIT);"All"!==a&&b.equalTo("affectedStatus",a);b.find({success:function(a){for(var b=0;b<a.length;b++){var d=a[b].toJSON(),e=JSON.parse(JSON.stringify(d.location)),e=new google.maps.LatLng(e.latitude,e.longitude),d=shouldBouncePinWithDate(new Date(d.updatedAt));dropMarkerAtPosition(b,e,c&&d)}},error:function(){}})}
function appendTotalUsersWithAffectedStatusToElement(a,c){var b=new Parse.Query("UserProfile");b.limit(LIMIT);"All"!==a&&b.equalTo("affectedStatus",a);b.find({success:function(a){document.getElementById(c).innerHTML+=a.length},error:function(){}})};